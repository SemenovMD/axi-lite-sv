# AXI Lite UART Master

Данный модуль представляет собой реализацию `AXI Lite UART Master` на `SystemVerilog`. Модуль обеспечивает управление и мониторинг внутрикристального интерфейса `AXI-Lite` через `UART` в FPGA. 

## Содержание
- [Особенности](#Особенности)
- [Параметры](#Параметры)
- [Тестовое окружение](#Тестовое-окружение)
- [Документация](#Документация)

## Особенности
- Полнодуплексный режим UART.
- Настраиваемая скорость передачи.
- Настраиваемая скорость тактирования.
- Полная поддержка AXI Lite протокола.
- Наличие скрипта для генерации/анализа тестовых данных на Python.

## Параметры
- `CLOCK` — тактовая частота системы (по умолчанию 100 МГц)
- `BAUD_RATE` — скорость передачи данных UART (по умолчанию 115200 бит/с)
- `UART_BYTE_START` — стартовый байт кадра (по умолчанию 8'hF0)
- `UART_BYTE_WR` — байт команды записи (Write) (по умолчанию 8'hA1)
- `UART_BYTE_RD` — байт команды чтения (Read) (по умолчанию 8'hA2)

## Тестовое окружение
Запуск через `make`:

```sh
# установка зависимостей Python
make install

# запуск теста UART и генерации логов
make run

# при необходимости прав доступа к serial-порту
make run-sudo

# помощь
make help
```

Логи формируются в `python/logs/`:
- `tx_data.txt`, `tx_decoded_data.txt`
- `rx_data.txt`, `rx_decoded_data.txt`
- `report.txt`

### Режимы скрипта `python/uart.py`
- Режим 1 (ручной ввод): формирование одного кадра по введенным header/addr/(data)/WR|RD.
- Режим 2 (из файла): отправка всех строк из `python/logs/tx_data.txt`.
- Режим 3 (рандом): генерация 32 случайных кадров (WR/RD) в заданных диапазонах адресов, замер скорости.
- Режим 4 (рандом c параметрами): пользователь задает число кадров и коды/заголовок.

### Формат сообщений TX и RX
- Кадр TX (10 байт):
```
START(1B) | ADDR(4B) | DATA(4B) | CMD(1B)
```
- Кадр RX (11 байт):
```
START(1B) | ADDR(4B) | DATA(4B) | RESP(1B) | CMD(1B)
```

### Разбор полей сообщения
- START: стартовый байт кадра (по умолчанию `f0`).
- ADDR: 32-битный адрес регистра.
- DATA: 32-битные данные.
- CMD: `a1` = WRITE, `a2` = READ.
- RESP (только в RX): код ответа AXI-Lite, младшие 2 бита: `00` = OKAY, `11` = DECERR, иначе ERROR.

## Документация

### `axil_uart_master`
Основной модуль UART Master AXI-Lite.

### `axil_uart_master_wrapper_sv`
SystemVerilog обертка для интеграции верхнего модуля.

### `axil_uart_master_wrapper_v`
Verilog обертка для проектов/IP, требующих Verilog.

### `axis_uart`
Приемопередатчик UART на AXI-Stream.

### `axis_uart_rx`
Приемник UART с AXI-Stream выходом.

### `axis_uart_tx`
Передатчик UART с AXI-Stream входом.

### `axis_uart_parser_gen`
Парсер/генератор UART-кадров на AXI-Stream.

### `axil_if`
Интерфейс AXI-Lite.

### `axis_if`
Интерфейс AXI-Stream.